# 5.3 團隊協作設定

## 💡 概念說明

團隊協作設定確保所有團隊成員使用一致的 AI 輔助開發規範,提升協作效率和程式碼品質。

---

## 🎯 團隊協作的挑戰

### 常見問題
- ❌ 每個人的 AI 產生不同風格的程式碼
- ❌ 缺乏統一的規範
- ❌ 新成員不知道如何設定
- ❌ 規範更新未同步

### 解決方案
- ✅ 統一的 `CLAUDE.md` 加入版本控制
- ✅ 清晰的設定文件
- ✅ 新人引導流程
- ✅ 定期審查和更新

---

## 📋 團隊設定最佳實踐

### 1. 版本控制 CLAUDE.md

```bash
# 將 CLAUDE.md 加入 Git
git add CLAUDE.md
git add src/*/CLAUDE.md
git commit -m "docs: 建立團隊 System Prompt 規範"
git push
```

#### .gitignore 設定
```gitignore
# 個人設定不加入版本控制
.vscode/settings.json  # VSCode 個人設定

# 但團隊共用的 CLAUDE.md 要加入
!CLAUDE.md
!**/CLAUDE.md
```

### 2. README 中說明

**在 `README.md` 中加入說明:**

```markdown
## 🤖 AI 輔助開發設定

本專案使用 Claude Code 進行 AI 輔助開發。

### 設定檔位置
- `CLAUDE.md` - 專案通用規範
- `frontend/CLAUDE.md` - 前端特定規範
- `backend/CLAUDE.md` - 後端特定規範

### 新成員設定步驟

#### VSCode 使用者
1. 安裝 [Claude Code 擴充套件](https://marketplace.visualstudio.com/items?itemName=anthropic.claude-code)
2. 登入 Claude 帳號
3. 開啟專案,擴充套件會自動讀取 `CLAUDE.md`

#### CLI 使用者
1. 安裝 CLI: `npm install -g @anthropic/claude-code`
2. 登入: `claude login`
3. 專案會自動使用 `CLAUDE.md` 設定

### 修改規範流程
1. 建立分支: `git checkout -b update-claude-rules`
2. 修改 `CLAUDE.md`
3. 提交 PR 並說明變更原因
4. 團隊審查後合併
5. 通知團隊成員拉取最新規範
```

---

## 🔄 規範更新流程

### Pull Request 範本

**`.github/PULL_REQUEST_TEMPLATE/claude-md-update.md`:**

```markdown
## CLAUDE.md 規範更新

### 變更類型
- [ ] 新增規範
- [ ] 修改現有規範
- [ ] 移除過時規範
- [ ] 修正錯誤

### 變更說明
<!-- 詳細說明為什麼需要這個變更 -->

### 影響範圍
- [ ] 影響前端開發
- [ ] 影響後端開發
- [ ] 影響測試規範
- [ ] 影響文件撰寫

### 檢查清單
- [ ] 已測試 AI 是否正確遵循新規範
- [ ] 已更新相關文件
- [ ] 已通知團隊成員
- [ ] 規範描述清晰明確

### 範例
<!-- 提供 AI 產生的程式碼範例,展示新規範的效果 -->

\`\`\`typescript
// 範例程式碼
\`\`\`
```

### Code Review 檢查點

審查 `CLAUDE.md` 變更時檢查:
1. ✅ 規範描述是否清晰
2. ✅ 是否提供範例
3. ✅ 是否與現有規範衝突
4. ✅ 是否影響其他模組
5. ✅ 變更原因是否合理

---

## 👥 團隊角色與責任

### System Prompt 維護者

**責任:**
- 審查 `CLAUDE.md` 的修改
- 確保規範一致性
- 解決規範衝突
- 教育團隊成員

**建議人選:**
- Tech Lead
- 資深開發者
- 架構師

### 團隊成員

**責任:**
- 遵循 `CLAUDE.md` 規範
- 提出改進建議
- 回報問題
- 測試 AI 產生的程式碼

---

## 📚 新人引導

### 新人 Onboarding 檢查清單

```markdown
## 新人 AI 輔助開發設定

歡迎加入團隊!請依照以下步驟完成設定:

### Day 1: 安裝和設定
- [ ] 安裝 Claude Code (VSCode 擴充套件 或 CLI)
- [ ] 使用公司帳號登入
- [ ] 確認可以存取 `CLAUDE.md`
- [ ] 測試簡單指令

### Day 2: 理解專案規範
- [ ] 閱讀專案根目錄 `CLAUDE.md`
- [ ] 閱讀你負責模組的 `CLAUDE.md`
- [ ] 了解專案術語和業務規則
- [ ] 向 mentor 提問不清楚的地方

### Day 3: 實際演練
- [ ] 使用 Claude Code 建立第一個元件
- [ ] 檢查是否符合團隊規範
- [ ] 請 mentor code review
- [ ] 調整和學習

### 資源
- [Claude Code 官方文件](https://docs.claude.com)
- [團隊規範 FAQ](./docs/CLAUDE_FAQ.md)
- Mentor: @tech-lead
```

### 培訓教材

**`docs/CLAUDE_TRAINING.md`:**

```markdown
# Claude Code 團隊培訓

## 基本概念
### 什麼是 System Prompt
[說明]

### 我們如何使用
[專案特定說明]

## 實際演練

### 練習 1: 建立基本元件
**任務**: 使用 Claude Code 建立一個 Button 元件

**預期結果**:
- 使用 TypeScript
- Function Component
- Props interface
- 繁體中文註解

### 練習 2: 理解資料夾層級設定
**任務**: 在 admin 資料夾建立元件

**預期結果**:
- 繼承通用規範
- 包含權限檢查
- 記錄操作日誌

## 常見問題
[Q&A]
```

---

## 🔍 監控和品質控制

### 1. Code Review 重點

```markdown
## Claude Code 產生的程式碼審查重點

### 自動檢查
- [ ] 通過 ESLint / Prettier
- [ ] 通過型別檢查
- [ ] 通過單元測試

### 人工審查
- [ ] 是否遵循 CLAUDE.md 規範
- [ ] 程式碼品質是否達標
- [ ] 是否有潛在的安全問題
- [ ] 是否符合業務邏輯

### AI 特定檢查
- [ ] 是否有不必要的複雜度
- [ ] 是否有過度工程
- [ ] 註解是否適當
```

### 2. 品質指標追蹤

```typescript
// 追蹤 AI 產生程式碼的品質
interface AICodeQualityMetrics {
  totalCommits: number;
  aiAssistedCommits: number;
  codeReviewPassRate: number;
  bugRateComparison: {
    aiAssisted: number;
    manual: number;
  };
  timeToMerge: {
    aiAssisted: number;
    manual: number;
  };
}
```

---

## 💬 溝通機制

### 1. Slack/Teams 頻道

建立專屬頻道:
- `#ai-coding-help` - 使用問題討論
- `#claude-md-updates` - 規範更新通知

### 2. 定期會議

**週會議程:**
- 回顧本週 AI 使用情況
- 討論遇到的問題
- 分享最佳實踐
- 規劃規範調整

### 3. 知識分享

```markdown
## 每週 AI 最佳實踐分享

### Week 1: @alice
**分享**: 如何用 Claude Code 快速建立 CRUD API

**學到的**:
- 明確的 prompt 很重要
- 提供範例可以提升品質
- 需要人工驗證業務邏輯

### Week 2: @bob
**分享**: 資料夾層級設定的實際應用

**學到的**:
- Admin 模組的特殊安全需求
- 如何避免規範衝突
- 測試不同層級設定
```

---

## 📊 團隊設定範例

### 完整的團隊 CLAUDE.md

```markdown
# 團隊專案: 電商平台

## 👥 團隊規範

### System Prompt 維護者
- Tech Lead: @tech-lead
- 前端負責: @frontend-lead
- 後端負責: @backend-lead

### 規範更新流程
1. 提出 Issue 說明需求
2. 討論並達成共識
3. 建立 PR 修改 CLAUDE.md
4. Code Review (需 2 人 approve)
5. 合併並通知團隊

### 爭議處理
- 技術決策由 Tech Lead 最終決定
- 重大變更需團隊投票 (>50% 同意)

## 📏 共同規範
[通用規範]

## 🚫 團隊禁止事項
- ❌ 不要個人修改 CLAUDE.md (需經 PR)
- ❌ 不要忽視 AI 產生的安全問題
- ❌ 不要完全依賴 AI,必須 code review

## 📝 團隊承諾
我們承諾:
- ✅ 遵循團隊規範
- ✅ 積極參與規範改進
- ✅ 審查 AI 產生的程式碼
- ✅ 分享最佳實踐
```

---

## 🔑 關鍵要點

> **成功的團隊協作需要統一的規範、清晰的流程和持續的溝通。**

記住:
- 📋 將 `CLAUDE.md` 加入版本控制
- 👥 明確角色和責任
- 🔄 建立規範更新流程
- 📚 提供新人引導
- 💬 保持團隊溝通

---

## 📚 延伸閱讀

- [5.4 多語言專案處理](./5.4-multilingual-projects.md)
- [附錄 B: 常見問題](../appendix/B-faq.md)

## 導航

- **上一節**: [5.2 專案特定上下文](./5.2-project-context.md)
- **下一節**: [5.4 多語言專案處理](./5.4-multilingual-projects.md)
- **返回**: [教材首頁](../../README.md)
