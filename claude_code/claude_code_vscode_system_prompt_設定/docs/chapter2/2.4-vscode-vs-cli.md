# 2.4 VSCode 擴充套件 vs CLI 工具的差異

## 💡 核心概念

Claude Code 提供兩種使用方式:
1. **VSCode 擴充套件** - 視覺化的 IDE 整合體驗
2. **CLI 工具** - 命令列介面的終端機工作流程

雖然兩者共用底層架構,但在 **System Prompt 設定**上有顯著差異。

---

## 📊 設定方式完整對照表

| 設定項目 | VSCode 擴充套件 | CLI 工具 | 說明 |
|:---------|:---------------|:---------|:-----|
| **專案層級 CLAUDE.md** | ✅ 支援 | ✅ 支援 | 兩者都支援 |
| **資料夾層級 CLAUDE.md** | ✅ 支援 | ✅ 支援 | 兩者都支援 |
| **全域 CLAUDE.md** | ❌ 不支援 | ✅ `~/.claude/CLAUDE.md` | CLI 獨有 |
| **全域 settings.json** | ⚠️ 透過 VS Code | ✅ `~/.claude/settings.json` | CLI 有專屬配置檔 |
| **專案 settings.json** | ⚠️ 透過 VS Code | ✅ `.claude/settings.json` | CLI 有專屬配置檔 |
| **命令列參數** | ❌ 不適用 | ✅ `--append-system-prompt` | CLI 獨有 |
| **自訂指令** | ❌ 不支援 | ✅ `.claude/commands/` | CLI 獨有 |
| **視覺化編輯** | ✅ 內建支援 | ❌ 僅文字檔 | VSCode 獨有 |
| **即時預覽** | ✅ Plan Mode | ❌ 無 | VSCode 獨有 |
| **MCP 伺服器** | ⚠️ 需 CLI 配置 | ✅ 完整支援 | CLI 為主要配置工具 |
| **Subagents** | ⚠️ 需 CLI 配置 | ✅ 完整支援 | CLI 為主要配置工具 |

---

## 🔧 CLI 獨有的設定選項

### 1. 全域 CLAUDE.md

**位置:** `~/.claude/CLAUDE.md`

**用途:** 為所有專案設定預設的 System Prompt

**範例:**
```markdown
# 全域 Claude Code 設定

## 通用規範
- 所有回應使用繁體中文
- 程式碼註解使用繁體中文
- 遵循業界最佳實踐

## 預設技術偏好
- 優先使用 TypeScript
- 函數式程式設計風格
- 完整的錯誤處理
```

**階層式載入:**
```
全域 CLAUDE.md (~/.claude/CLAUDE.md)
    ↓ (被覆蓋/合併)
專案 CLAUDE.md (project/CLAUDE.md)
    ↓ (被覆蓋/合併)
資料夾 CLAUDE.md (project/src/CLAUDE.md)
```

---

### 2. 命令列參數

CLI 提供即時修改 System Prompt 的能力:

```bash
# 基本用法
claude -p "建立一個 React 元件" \
  --append-system-prompt "使用 TypeScript 和 Hooks"

# 複雜範例
claude -p "重構這個函數" \
  --append-system-prompt "優先考慮效能和可讀性,加入詳細註解"
```

**特點:**
- ✅ 不修改檔案,僅影響當次執行
- ✅ 適合一次性需求
- ✅ 可動態調整行為

---

### 3. CLI Settings.json

**全域設定:** `~/.claude/settings.json`
```json
{
  "model": "claude-sonnet-4-5-20250929",
  "max_tokens": 4096,
  "temperature": 0.7,
  "system_prompt": "你是專業的程式設計助手,使用繁體中文回答",
  "include_patterns": ["*.js", "*.ts", "*.py", "*.md"],
  "exclude_patterns": ["node_modules/**", "*.log"]
}
```

**專案設定:** `project/.claude/settings.json`
```json
{
  "system_prompt": "這是 React 專案,使用 TypeScript 和 Tailwind CSS",
  "context_window": 8192,
  "streaming": true,
  "cache_responses": true
}
```

---

### 4. 自訂 Slash Commands

**位置:** `.claude/commands/`

CLI 允許建立自訂指令來封裝常用的 System Prompt:

**範例:** `.claude/commands/review.md`
```markdown
---
description: 進行詳細的程式碼審查
---

你是一位資深的程式碼審查專家。請檢查以下方面:

1. **程式碼品質**
   - 可讀性
   - 可維護性
   - 遵循最佳實踐

2. **安全性**
   - 輸入驗證
   - SQL 注入風險
   - XSS 漏洞

3. **效能**
   - 演算法效率
   - 記憶體使用
   - 潛在瓶頸

請提供具體的改進建議和程式碼範例。
```

**使用:**
```bash
claude /review src/main.js
```

---

## 🎨 VSCode 擴充套件獨有功能

### 1. 視覺化介面

- **Plan Mode** - 查看 AI 的執行計畫
- **Inline Diffs** - 即時查看程式碼變更
- **Auto-accept** - 快速接受變更

### 2. IDE 整合

- **檔案總管整合** - 直接在檔案上右鍵操作
- **側邊欄面板** - 專屬的 Claude Code 面板
- **快捷鍵支援** - 快速呼叫功能

### 3. 即時互動

- **對話式介面** - 更自然的對話體驗
- **多輪對話** - 保持上下文連續性
- **視覺化回饋** - 清楚的狀態指示

---

## 🔄 依賴關係說明

### VSCode 依賴 CLI 配置

**重要:** VSCode 擴充套件的某些功能需要先透過 CLI 配置:

```bash
# 1. 先在 CLI 配置 MCP 伺服器
claude mcp add my-server http://localhost:8080

# 2. VSCode 擴充套件會自動使用這個配置

# 3. 配置 Subagents
claude config set agents.code-reviewer.prompt "專業的程式碼審查專家"

# 4. VSCode 擴充套件可以使用這些 subagents
```

### 共用的配置檔案

兩者共用以下配置:
- ✅ 專案層級的 `CLAUDE.md`
- ✅ 資料夾層級的 `CLAUDE.md`
- ✅ MCP 伺服器設定
- ✅ Subagents 設定

---

## 🎯 使用情境建議

### 選擇 VSCode 擴充套件的情境

#### ✅ 適合:
- 🎨 **視覺化開發** - 需要看到即時變更
- 🐁 **滑鼠操作** - 習慣使用 GUI
- 🔄 **快速迭代** - 頻繁的程式碼修改
- 👥 **團隊協作** - 需要展示和討論
- 🆕 **新手友善** - 剛開始使用 Claude Code

#### ❌ 不適合:
- ⚙️ 需要高度客製化的 System Prompt
- 🔁 批次處理多個檔案
- 🤖 自動化腳本和 CI/CD
- 🌐 遠端伺服器開發

---

### 選擇 CLI 工具的情境

#### ✅ 適合:
- 💻 **終端機工作** - 習慣命令列操作
- 🔧 **高度客製化** - 需要精細控制 System Prompt
- 🔁 **批次處理** - 處理多個檔案或專案
- 🤖 **自動化** - 整合到腳本或 CI/CD
- 🌐 **遠端開發** - SSH 連線到伺服器
- ⚡ **輕量快速** - 不需要啟動 IDE

#### ❌ 不適合:
- 🎨 需要視覺化預覽
- 🐁 不熟悉命令列操作
- 🔄 頻繁的互動式修改

---

## 💡 混合使用策略

### 推薦工作流程

#### 策略 1: CLI 配置 + VSCode 執行
```bash
# 步驟 1: 使用 CLI 建立專案配置
claude init
vim .claude/settings.json  # 編輯專案設定
vim CLAUDE.md              # 建立 System Prompt

# 步驟 2: 在 VSCode 中開發
# 開啟 VSCode,使用擴充套件進行日常開發
```

#### 策略 2: 依任務選擇工具
```
視覺化開發 → VSCode 擴充套件
批次處理   → CLI 工具
自動化腳本 → CLI 工具
程式碼審查 → VSCode 擴充套件
```

#### 策略 3: 分層設定
```markdown
全域規範 (CLI)
  ↓ ~/.claude/CLAUDE.md
  - 語言偏好
  - 通用編碼風格

專案設定 (兩者共用)
  ↓ project/CLAUDE.md
  - 技術棧
  - 專案規範

日常開發 (VSCode)
  ↓ 使用擴充套件
  - 互動式開發
  - 視覺化修改
```

---

## 🔍 實際案例

### 案例 1: 前端開發者

**背景:** React + TypeScript 專案

**配置策略:**
```bash
# 1. CLI - 建立全域偏好
# ~/.claude/CLAUDE.md
---
所有專案預設使用:
- TypeScript 嚴格模式
- 函數式元件
- 繁體中文註解
---

# 2. VSCode - 日常開發
使用擴充套件進行:
- 元件開發
- 程式碼重構
- 互動式除錯
```

---

### 案例 2: 全端工程師

**背景:** 需要同時處理前後端

**配置策略:**
```bash
# 專案根目錄 CLAUDE.md - 通用規範
# frontend/CLAUDE.md - 前端特定規則
# backend/CLAUDE.md - 後端特定規則

# 使用 VSCode 進行:
- 前端 UI 開發
- 後端 API 開發

# 使用 CLI 進行:
- 批次重構
- 自動化測試生成
- CI/CD 整合
```

---

### 案例 3: DevOps 工程師

**背景:** 需要自動化和腳本

**配置策略:**
```bash
# 主要使用 CLI
claude --append-system-prompt "生成 Kubernetes YAML" \
  -p "建立部署配置"

# 整合到腳本
#!/bin/bash
claude generate \
  --template k8s-deployment \
  --output deploy.yaml
```

---

## 📊 功能對照總結

| 功能類別 | VSCode 擴充套件 | CLI 工具 | 推薦使用 |
|:--------|:---------------|:---------|:---------|
| **互動式開發** | ⭐⭐⭐⭐⭐ | ⭐⭐ | VSCode |
| **批次處理** | ⭐⭐ | ⭐⭐⭐⭐⭐ | CLI |
| **視覺化** | ⭐⭐⭐⭐⭐ | ⭐ | VSCode |
| **客製化** | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | CLI |
| **自動化** | ⭐⭐ | ⭐⭐⭐⭐⭐ | CLI |
| **學習曲線** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | VSCode |
| **遠端開發** | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | CLI |
| **團隊協作** | ⭐⭐⭐⭐ | ⭐⭐⭐ | VSCode |

---

## 💡 最佳實踐建議

### 1. 新手入門
```
開始階段: 使用 VSCode 擴充套件
  ↓
熟悉後: 學習 CLI 基本指令
  ↓
進階階段: 混合使用
```

### 2. 團隊協作
- ✅ 統一使用 `CLAUDE.md` (兩者共用)
- ✅ 將配置檔加入版本控制
- ✅ 提供兩種工具的使用指南
- ✅ 根據任務性質選擇工具

### 3. CI/CD 整合
- ✅ 使用 CLI 進行自動化
- ✅ 設定全域配置檔
- ✅ 使用環境變數管理 API 金鑰
- ✅ 記錄執行日誌

---

## 🎯 關鍵要點

> **VSCode 擴充套件和 CLI 工具各有優勢,選擇適合的工具或混合使用可以最大化開發效率。**

記住:
- 🎨 **視覺化工作** → VSCode 擴充套件
- ⚙️ **自動化和批次** → CLI 工具
- 🔄 **混合使用** → 發揮兩者優勢
- 📁 **共用配置** → `CLAUDE.md` 檔案

---

## 📚 延伸閱讀

- [Claude Code CLI 完整使用指南](../../../claude_code_cli/README.md)
- [第三章：資料夾層級設定](../chapter3/README.md)
- [第五章：進階技巧](../chapter5/README.md)

## 導航

- **上一節**: [2.3 完整範例解析](./2.3-complete-example.md)
- **下一章**: [第三章：資料夾層級設定](../chapter3/README.md)
- **返回**: [教材首頁](../../README.md)
