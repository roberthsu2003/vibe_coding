# 2.3 完整範例解析

本節提供一個完整的 `CLAUDE.md` 範例,並逐段解析每個部分的作用和最佳實踐。

---

## 📄 完整範例

以下是一個實際電商專案的 `CLAUDE.md` 範例:

```markdown
# 專案:電商平台前端

## 🎯 專案目標
此專案是為線上商店建立一個現代化、反應快速的前端介面。
主要功能包括商品瀏覽、購物車管理、訂單處理和使用者帳戶管理。

## ⚙️ 技術棧
- **語言:** TypeScript 5.0+
- **框架:** React 18 (使用 Function Components 和 Hooks)
- **狀態管理:** Zustand 4.x
- **樣式:** Tailwind CSS 3.x
- **API 客戶端:** Axios
- **路由:** React Router v6
- **測試:** Jest + React Testing Library
- **建置工具:** Vite
- **套件管理:** pnpm

## 📏 編碼規範與規則

### 元件開發
- 所有元件都必須是函式元件 (Function Components)
- 每個元件都要定義 TypeScript Props 介面
- 使用自定義 Hooks 封裝邏輯
- 元件應該保持單一職責原則

### 命名慣例
- **元件**: PascalCase (例如: `UserProfile.tsx`)
- **Hooks**: camelCase with 'use' prefix (例如: `useAuth.ts`)
- **工具函數**: camelCase (例如: `formatDate.ts`)
- **常數**: UPPER_SNAKE_CASE (例如: `API_BASE_URL`)
- **型別/介面**: PascalCase (例如: `UserProfile`)

### TypeScript 規範
- 使用 TypeScript 嚴格模式 (`strict: true`)
- 避免使用 `any` 類型,使用 `unknown` 代替
- 優先使用類型推導
- 使用 `interface` 定義物件結構
- 使用 `type` 定義聯合型別

### 程式碼風格
- 使用 2 空格縮排
- 使用單引號
- 每行最多 100 字元
- 使用 Prettier 格式化
- 遵循 ESLint 規則
- Props 使用解構賦值

### 函式規範
- 每個函數不超過 50 行程式碼
- 複雜函數要拆分成小函數
- 使用描述性的函數名稱
- 優先使用箭頭函數
- 避免巢狀過深(不超過 3 層)

## 🏗️ 專案結構
```
src/
├── components/       # 可重用的 UI 元件
│   ├── common/      # 通用元件 (Button, Input 等)
│   └── features/    # 功能特定元件
├── pages/           # 頁面元件
├── hooks/           # 自定義 React Hooks
├── stores/          # Zustand 狀態管理
├── services/        # API 服務層
├── utils/           # 工具函數
├── types/           # TypeScript 類型定義
├── constants/       # 常數定義
└── styles/          # 全域樣式
```

## 🚫 禁止事項
- ❌ 不要使用 Class Components
- ❌ 不要使用 CSS-in-JS 函式庫,如 styled-components
- ❌ 絕對不要在此專案中使用 jQuery
- ❌ 避免使用 `export default`,應優先使用具名匯出 `export`
- ❌ 不要在元件內直接呼叫 API,應使用 services 層
- ❌ 避免使用 `any` 類型,應明確定義類型
- ❌ 不要直接修改 state,應使用不可變更新
- ❌ 避免在 useEffect 中執行過多邏輯

## 🔗 API 互動
與後端 API 的所有互動都必須透過 `src/services/apiClient.ts`
中定義的 `apiClient` 實例進行。

### API 呼叫範例
```typescript
// ✅ 正確:使用 service 層
import { userService } from '@/services/userService';
const user = await userService.getUserById(userId);

// ❌ 錯誤:在元件內直接呼叫 API
const user = await axios.get(`/api/users/${userId}`);
```

## 🧪 測試要求
- 所有新功能都必須包含單元測試
- 測試覆蓋率應保持在 80% 以上
- 使用 `describe` 和 `it` 組織測試案例
- 測試案例命名:「應該在 [情境] 時 [預期結果]」

### 測試結構範例
```typescript
describe('UserProfile 元件', () => {
  it('應該在收到使用者資料時正確顯示', () => {
    // 測試邏輯
  });

  it('應該在載入時顯示載入指示器', () => {
    // 測試邏輯
  });
});
```

## 📝 文件化要求
- 所有 public 函數都要有 JSDoc 註解
- 複雜邏輯需要內聯註解說明
- Props 介面要有清楚的註解
- 註解使用繁體中文

### JSDoc 範例
```typescript
/**
 * 取得使用者的完整資訊
 * @param userId - 使用者的唯一識別碼
 * @returns 包含使用者詳細資訊的 Promise
 * @throws {UserNotFoundError} 當使用者不存在時拋出
 */
async function getUserProfile(userId: string): Promise<UserProfile> {
  // 實作
}
```

## 🎨 UI/UX 規範
- 所有互動都要有視覺回饋
- 載入狀態要有明確的指示器
- 錯誤訊息要使用者友善
- 確保鍵盤導航支援
- 實作適當的 ARIA 屬性
- 確保顏色對比度符合 WCAG AA 標準

## 🔒 安全性要求
- 所有使用者輸入都要驗證
- 敏感資料不可儲存在 localStorage
- 使用 HTTPS 進行所有 API 呼叫
- 實作 CSRF 保護
- 避免 XSS 攻擊風險

## ⚡ 效能優化
- 使用 React.memo 優化不必要的重新渲染
- 大型列表使用虛擬滾動
- 圖片使用懶載入
- 實作程式碼分割 (Code Splitting)
- 避免在 render 中建立新函數或物件

## 📋 提交訊息規範
使用 Conventional Commits 格式:
- `feat:` 新功能
- `fix:` 錯誤修復
- `docs:` 文件更新
- `style:` 程式碼格式調整
- `refactor:` 程式碼重構
- `test:` 測試相關
- `chore:` 建置/工具相關
- `perf:` 效能優化

範例: `feat: 新增使用者個人資料頁面`
```

---

## 🔍 逐段解析

### 1. 專案目標區塊

```markdown
## 🎯 專案目標
此專案是為線上商店建立一個現代化、反應快速的前端介面。
主要功能包括商品瀏覽、購物車管理、訂單處理和使用者帳戶管理。
```

**作用:**
- 讓 AI 理解專案的整體目標
- 提供業務上下文
- 幫助 AI 做出符合專案需求的建議

**最佳實踐:**
- 保持簡潔(2-3 句話)
- 明確說明主要功能
- 避免過度技術性的描述

---

### 2. 技術棧區塊

```markdown
## ⚙️ 技術棧
- **語言:** TypeScript 5.0+
- **框架:** React 18
...
```

**作用:**
- 明確指定使用的技術和版本
- 避免 AI 建議不相容的套件
- 確保程式碼風格一致

**最佳實踐:**
- 包含版本號
- 列出主要依賴
- 說明建置工具

---

### 3. 編碼規範區塊

```markdown
## 📏 編碼規範與規則
### 元件開發
- 所有元件都必須是函式元件
...
```

**作用:**
- 定義程式碼撰寫標準
- 確保團隊一致性
- 自動化規範檢查

**最佳實踐:**
- 分類組織(元件、命名、風格等)
- 使用清單格式
- 提供具體範例

---

### 4. 專案結構區塊

```markdown
## 🏗️ 專案結構
```
src/
├── components/
├── pages/
...
```
```

**作用:**
- 讓 AI 了解檔案組織方式
- 自動將新檔案放在正確位置
- 幫助生成符合結構的程式碼

**最佳實踐:**
- 使用樹狀圖
- 加入註解說明各目錄用途
- 保持最新

---

### 5. 禁止事項區塊

```markdown
## 🚫 禁止事項
- ❌ 不要使用 Class Components
...
```

**作用:**
- 明確告知 AI 什麼不該做
- 避免產生不符合規範的程式碼
- 減少需要手動修正的地方

**最佳實踐:**
- 使用否定語句
- 提供替代方案
- 說明原因(可選)

---

### 6. 範例程式碼區塊

```markdown
### API 呼叫範例
\`\`\`typescript
// ✅ 正確
const user = await userService.getUserById(userId);

// ❌ 錯誤
const user = await axios.get(`/api/users/${userId}`);
\`\`\`
```

**作用:**
- 提供具體的做法示範
- 對比正確與錯誤的方式
- 加深 AI 的理解

**最佳實踐:**
- 使用 ✅ 和 ❌ 標示
- 保持範例簡短
- 針對常見錯誤提供範例

---

## 💡 撰寫技巧總結

### 1. 使用表情符號增加可讀性
- 🎯 目標相關
- ⚙️ 技術相關
- 📏 規範相關
- 🚫 禁止事項
- ✅ 正確做法
- ❌ 錯誤做法

### 2. 結構化組織
- 使用標題層級
- 分類清楚
- 邏輯順序

### 3. 具體明確
- 避免模糊描述
- 提供實際範例
- 說明原因

### 4. 保持更新
- 隨專案演進調整
- 定期審查內容
- 移除過時資訊

---

## 🎯 檢查清單

使用此清單檢查您的 `CLAUDE.md` 是否完整:

- [ ] 包含專案概觀
- [ ] 明確列出技術棧和版本
- [ ] 定義編碼規範
- [ ] 說明專案結構
- [ ] 列出禁止事項
- [ ] 提供程式碼範例
- [ ] 包含測試要求
- [ ] 說明文件化標準
- [ ] 使用表情符號增加可讀性
- [ ] 內容具體明確

---

## 📚 其他範例

### Node.js 後端專案範例
參見:[第四章 範例 2 - Node.js 後端開發](../chapter4/4.2-nodejs-backend.md)

### Python 資料分析範例
參見:[第四章 範例 3 - Python 資料分析](../chapter4/4.3-python-data-analysis.md)

### 全端專案範例
參見:[第四章 範例 4 - 全端開發](../chapter4/4.4-fullstack.md)

## 導航

- **上一節**: [2.2 建立第一個 CLAUDE.md](./2.2-create-first-claude-md.md)
- **下一節**: [2.4 VSCode 擴充套件 vs CLI 工具的差異](./2.4-vscode-vs-cli.md)
- **下一章**: [第三章：資料夾層級設定](../chapter3/README.md)
- **返回**: [教材首頁](../../README.md)
