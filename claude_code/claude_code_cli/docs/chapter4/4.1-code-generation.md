# 4.1 代碼生成 (generate)

## 簡介

代碼生成是 Claude Code CLI 最核心的功能之一。透過自然語言描述你想要的功能，Claude 就能自動生成高品質的代碼。無論是建立新的函數、類別、元件，還是整個模組，Claude 都能理解你的需求並產生符合最佳實踐的程式碼。

本節將深入探討如何有效使用代碼生成功能，包括不同的生成方式、參數配置，以及如何撰寫清晰的生成指令來獲得最佳結果。

## 基本用法

### 生成新檔案

```bash
# 生成單一檔案
claude "建立一個計算器類別，包含基本的加減乘除功能"

# 生成多個相關檔案
claude "建立一個 React 登入元件，包含表單驗證和錯誤處理"
```

### 在現有專案中生成代碼

```bash
# 在現有檔案中新增功能
claude "在 utils.js 中新增一個格式化日期的函數"

# 生成測試檔案
claude "為 calculator.js 生成對應的測試檔案"
```

## 進階技巧

### 指定技術棧

```bash
# 指定使用的框架或函式庫
claude "用 TypeScript 建立一個 Express API，包含路由和中介層"

# 指定設計模式
claude "用工廠模式建立一個資料庫連線管理器"
```

### 互動式生成

```bash
# 進入互動模式進行多輪對話
claude

> 我想建立一個購物車功能
> 需要支援新增、刪除、更新數量
> 使用 Redux 管理狀態
```

## 實用範例

### 範例 1：建立 REST API 端點

```bash
claude "建立一個 Node.js API 端點，處理用戶註冊，包含：
- Email 驗證
- 密碼加密
- 錯誤處理
- 回傳 JWT token"
```

### 範例 2：資料庫模型

```bash
claude "用 Mongoose 建立一個 Blog 文章模型，包含：
- 標題、內容、作者
- 建立和更新時間
- 標籤陣列
- 發布狀態"
```

### 範例 3：前端元件

```bash
claude "建立一個 Vue 3 的圖片輪播元件，支援：
- 自動播放
- 左右切換按鈕
- 指示點導航
- 響應式設計"
```

## 最佳實踐

### 1. 明確描述需求

**好的範例：**
```bash
claude "建立一個排序函數，接收數字陣列，回傳由小到大排序的新陣列，不修改原陣列"
```

**不好的範例：**
```bash
claude "寫個排序"
```

### 2. 提供上下文

```bash
# 說明專案背景
claude "在這個 Express 專案中，建立一個認證中介層，使用 JWT 驗證"

# 參考現有代碼風格
claude "參考 user.controller.js 的風格，建立 product.controller.js"
```

### 3. 分步驟生成

對於複雜功能，分成多個步驟：

```bash
# 步驟 1：建立基本結構
claude "建立一個電商網站的資料夾結構"

# 步驟 2：生成模型
claude "建立 Product、User、Order 三個資料模型"

# 步驟 3：新增業務邏輯
claude "為 Product 模型新增庫存管理功能"
```

## 參數說明

### 常用參數

```bash
# 指定輸出檔案
claude "建立登入函數" --output ./src/auth/login.js

# 指定語言
claude "建立排序演算法" --language python

# 使用範本
claude "建立 React 元件" --template functional-component
```

### 配置選項

```bash
# 設定代碼風格
claude config set style airbnb

# 設定預設語言
claude config set language typescript

# 啟用自動格式化
claude config set auto-format true
```

## 常見問題

### Q: 生成的代碼品質如何？
A: Claude 會根據業界最佳實踐生成代碼，但建議您仔細檢查並根據專案需求調整。

### Q: 可以生成哪些程式語言？
A: 支援主流程式語言，包括 JavaScript、Python、TypeScript、Java、Go、Rust 等。

### Q: 如何確保代碼符合專案規範？
A: 在指令中明確說明規範，或使用 `--config` 參數載入專案配置檔。

### Q: 生成錯誤怎麼辦？
A: 提供更詳細的描述，或使用互動模式進行多輪對話澄清需求。

## 小技巧

1. **使用範例輸入輸出**：提供預期的輸入和輸出範例，幫助 Claude 理解需求
2. **參考現有代碼**：要求 Claude 參考專案中的現有檔案來保持一致性
3. **漸進式完善**：先生成基本版本，再逐步新增功能
4. **善用註解**：要求在代碼中加入詳細註解，方便日後維護

## 延伸閱讀

- [4.2 代碼分析](./4.2-code-analysis.md) - 學習如何分析生成的代碼
- [4.4 測試生成](./4.4-testing.md) - 為生成的代碼建立測試
- [7.1 如何寫好命令？](../chapter7/7.1-writing-commands.md) - 撰寫更有效的指令

---

⏳ 內容持續補充中

## 導航

- **上一節**: [第四章：核心功能詳解](./README.md)
- **下一節**: [4.2 代碼分析](./4.2-code-analysis.md)
- **返回章節目錄**: [第四章目錄](./README.md)
- **返回首頁**: [教材首頁](../../README.md)
