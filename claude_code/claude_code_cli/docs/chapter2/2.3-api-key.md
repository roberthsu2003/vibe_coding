# 2.3 設定 API 金鑰

## 步驟一：取得 API 金鑰

1. 前往 [Anthropic Console](https://console.anthropic.com/)
2. 註冊或登入帳號
3. 確認已訂閱 Claude Pro/Team/Enterprise
4. 點選左側「API Keys」
5. 點擊「Create Key」按鈕
6. 為金鑰命名（例如：「CLI 開發用」）
7. 複製生成的金鑰（格式：`sk-ant-api03-...`）

📸 *[需要加入 API 金鑰頁面截圖]*

⚠️ **重要**：金鑰只會顯示一次，請立即複製保存！

## 步驟二：設定金鑰

### 方法 1：環境變數（推薦）

**Windows (PowerShell)**:
```powershell
# 暫時設定（僅當前會話）
$env:ANTHROPIC_API_KEY="your-api-key-here"

# 永久設定
[Environment]::SetEnvironmentVariable("ANTHROPIC_API_KEY", "your-api-key-here", "User")
```

**macOS/Linux (Bash)**:
```bash
# 暫時設定
export ANTHROPIC_API_KEY="your-api-key-here"

# 永久設定（加入 .bashrc 或 .zshrc）
echo 'export ANTHROPIC_API_KEY="your-api-key-here"' >> ~/.bashrc
source ~/.bashrc
```

### 方法 2：配置檔案

```bash
# 使用 Claude CLI 配置命令
claude config set api-key your-api-key-here
```

### 方法 3：專案 .env 檔案

在專案目錄建立 `.env` 檔案：
```bash
echo "ANTHROPIC_API_KEY=your-api-key-here" > .env
```

**⚠️ 重要**：記得將 `.env` 加入 `.gitignore`！

## ✅ 驗證設定

```bash
# 測試 API 連線
claude test-connection

# 或執行簡單命令
claude chat --prompt "你好"
```

成功的話會看到 Claude 的回應！

## 安全提醒

- ❌ **絕對不要**將 API 金鑰提交到 Git
- ❌ **絕對不要**在公開的程式碼中寫入金鑰
- ❌ **絕對不要**分享金鑰給他人
- ✅ 使用環境變數或加密的配置檔案
- ✅ 將 `.env` 加入 `.gitignore`
- ✅ 定期更換 API 金鑰

## .gitignore 設定

在專案根目錄的 `.gitignore` 加入：
```
# API 金鑰
.env
.claude/config.json

# macOS
.DS_Store
```

---

## 導航

- **上一節**: [2.2 安裝 Claude Code CLI](./2.2-install-cli.md)
- **下一節**: [2.4 首次使用測試](./2.4-first-test.md)
- **返回**: [第二章目錄](./README.md)
