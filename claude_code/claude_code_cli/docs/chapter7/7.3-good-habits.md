# 7.3 良好使用習慣

## 簡介

培養良好的使用習慣能讓你更有效率地使用 Claude Code CLI，提升代碼品質，並建立可持續的開發流程。本節分享進階使用者的最佳實踐和工作流程。

## 日常開發習慣

### 1. 開始工作前的檢查

```bash
# 每天開始工作時
#!/bin/bash
# morning-check.sh

echo "🌅 早安！開始每日檢查..."

# 更新代碼
git pull origin main

# 檢查依賴
npm outdated

# 分析代碼品質
claude analyze ./src --brief

# 運行測試
npm test

echo "✅ 檢查完成，開始工作！"
```

### 2. 使用分支開發

```bash
# 永遠在分支上工作
git checkout -b feature/new-feature

# 使用 Claude 開發
claude "建立新功能"

# 定期提交
git add .
git commit -m "feat: add new feature"

# 完成後合併
git checkout main
git merge feature/new-feature
```

### 3. 小步前進

```bash
# ✅ 好習慣：分步驟開發
claude "步驟 1：建立資料模型"
npm test

claude "步驟 2：建立 API 端點"
npm test

claude "步驟 3：添加驗證"
npm test

# ❌ 壞習慣：一次做完所有事
claude "建立完整的功能，包含模型、API、驗證、測試、文檔"
```

## 代碼品質習慣

### 4. 持續審查

```bash
# 每次生成代碼後都分析
claude "建立 User controller"
claude analyze src/controllers/userController.js

# 根據分析結果改進
claude "優化 userController，解決分析報告中的問題"
```

### 5. 測試先行或同步

```bash
# 方法 1：TDD（測試驅動開發）
claude "為尚未實作的 calculateTotal 函數寫測試"
claude "根據測試實作 calculateTotal 函數"

# 方法 2：同步開發
claude "建立 processOrder 函數，同時生成對應的測試"
```

### 6. 文檔即時更新

```bash
# 每次修改代碼時更新文檔
git diff src/api/

# 更新相關文檔
claude "根據這些變更更新 API 文檔"

# 添加代碼註解
claude batch "為修改的檔案添加或更新 JSDoc 註解"
```

## 學習成長習慣

### 7. 理解而非只是使用

```bash
# ✅ 好習慣：要求解釋
claude "建立這個功能，並解釋為什麼這樣設計"

# ✅ 深入學習
claude "這段代碼使用了什麼設計模式？為什麼？有什麼替代方案？"

# ❌ 壞習慣：盲目複製貼上
```

### 8. 建立知識庫

```bash
# 整理學習筆記
mkdir -p knowledge-base/{patterns,best-practices,troubleshooting}

# 記錄有用的範例
claude "整理今天學到的 React Hooks 最佳實踐" > knowledge-base/best-practices/react-hooks.md

# 記錄解決方案
echo "問題：MongoDB 連線超時
解決：增加 timeout 設定" > knowledge-base/troubleshooting/mongodb-timeout.md
```

### 9. 定期複習

```bash
# 每週複習腳本
#!/bin/bash
# weekly-review.sh

echo "📚 每週複習..."

# 查看本週的 commits
git log --since="1 week ago" --oneline

# 生成週報
claude "根據這週的 git commits 生成工作總結" > reports/week-$(date +%Y%W).md

# 分析進步
claude "比較本週和上週的測試覆蓋率，提供改進建議"
```

## 團隊協作習慣

### 10. 保持一致性

```bash
# 使用專案配置檔
# .claude/config.json
{
  "style": "airbnb",
  "language": "typescript",
  "testFramework": "jest",
  "docFormat": "jsdoc"
}

# 團隊成員都使用相同設定
claude config load .claude/config.json
```

### 11. Code Review 習慣

```bash
# 提交 PR 前自動檢查
# .git/hooks/pre-push

#!/bin/bash
echo "🔍 Pre-push 檢查..."

# 代碼分析
claude analyze --staged --severity high

# 運行測試
npm test

# 檢查文檔
claude "檢查是否所有新增的公開函數都有文檔"

echo "✅ 檢查通過！"
```

### 12. 分享知識

```bash
# 記錄有用的 Claude 指令
# team-prompts.md

## 常用指令模板

### 建立 API 端點
claude "建立 [資源名稱] 的 RESTful API，包含 CRUD 操作"

### 生成測試
claude "為 [檔案名稱] 生成完整測試，涵蓋正常和異常情況"
```

## 效率提升習慣

### 13. 使用別名和腳本

```bash
# ~/.bashrc 或 ~/.zshrc

# Claude 常用指令
alias ca='claude analyze'
alias cg='claude generate'
alias ct='claude "為這個檔案生成測試"'
alias cd='claude "生成這個函數的文檔"'

# 組合指令
alias dev-start='npm run dev & claude analyze ./src --watch'
alias quick-test='claude "生成快速測試" && npm test'
```

### 14. 自動化重複任務

```bash
# 建立自動化腳本
# scripts/auto-improve.sh

#!/bin/bash
echo "🤖 自動改進代碼..."

# 格式化
npm run format

# 添加缺失的註解
claude batch "為缺少註解的函數添加 JSDoc"

# 生成缺失的測試
claude batch "為沒有測試的檔案生成測試"

# 更新文檔
claude batch "更新所有過時的文檔"

echo "✨ 改進完成！"
```

### 15. 批次處理技巧

```bash
# 找出需要改進的檔案
claude "列出所有需要重構的檔案" --format json > refactor-list.json

# 批次處理
jq -r '.files[]' refactor-list.json | while read file; do
  claude "重構 $file，改善可讀性"
  npm test -- $file.test.js
done
```

## 維護習慣

### 16. 定期維護

```bash
# 每月維護腳本
#!/bin/bash
# monthly-maintenance.sh

echo "🔧 每月維護..."

# 更新相依套件
npm update

# 檢查安全漏洞
npm audit

# 清理未使用的代碼
claude "找出並列出未使用的函數和變數"

# 優化效能
claude analyze ./src --focus performance

# 更新文檔
claude batch "確保所有文檔都是最新的"

echo "✅ 維護完成！"
```

### 17. 技術債務管理

```bash
# 記錄技術債務
# tech-debt.md

## 待處理項目

- [ ] 重構 userService.js（過於複雜）
- [ ] 添加缺失的測試（coverage < 80%）
- [ ] 更新過時的文檔
- [ ] 優化資料庫查詢

# 定期處理
claude "從 tech-debt.md 中選擇優先度最高的項目，提供解決方案"
```

## 安全習慣

### 18. 安全意識

```bash
# 每次處理敏感功能時
claude "檢查這段認證代碼的安全性"
claude "這個 API 端點有什麼安全風險？"

# 定期安全審查
claude analyze ./src/auth --focus security
```

### 19. 敏感資訊處理

```bash
# ✅ 好習慣：使用環境變數
claude "重構這段代碼，將硬編碼的 API key 改用環境變數"

# ✅ 檢查洩漏
git diff | claude "檢查這些變更是否包含敏感資訊"

# ❌ 壞習慣：直接提交密碼、API key
```

## 最佳實踐總結

### 日常檢查清單

**每天：**
- [ ] 開始前：拉取最新代碼、運行測試
- [ ] 開發時：使用分支、小步提交
- [ ] 結束前：代碼審查、更新文檔

**每週：**
- [ ] 複習學習筆記
- [ ] 處理技術債務
- [ ] 團隊知識分享

**每月：**
- [ ] 更新相依套件
- [ ] 安全審查
- [ ] 效能優化

### 代碼品質檢查清單

- [ ] 代碼分析通過
- [ ] 測試覆蓋率 > 80%
- [ ] 文檔完整
- [ ] 無安全漏洞
- [ ] 效能可接受
- [ ] 符合團隊規範

## 進階技巧

### 20. 建立個人工作流程

```bash
# 我的工作流程範本
# my-workflow.sh

#!/bin/bash

function new_feature() {
  # 1. 建立分支
  git checkout -b feature/$1

  # 2. 規劃
  claude "為 $1 功能設計架構"

  # 3. 實作
  claude "實作 $1 功能的核心邏輯"

  # 4. 測試
  claude "生成 $1 的測試"
  npm test

  # 5. 文檔
  claude "為 $1 生成文檔"

  # 6. 審查
  claude analyze

  # 7. 提交
  git add .
  git commit -m "feat: add $1"
}

# 使用
new_feature "user-authentication"
```

## 常見問題

### Q: 需要每次都這麼嚴格嗎？
A: 視專案規模而定。小專案可以簡化，但核心習慣（版本控制、測試、文檔）建議保持。

### Q: 如何平衡速度和品質？
A: 重要功能高品質，原型開發可以快速迭代。關鍵是知道什麼時候該用什麼標準。

### Q: 自動化會不會太複雜？
A: 從簡單開始，逐步增加。先自動化最耗時的任務。

---

⏳ 內容持續補充中

## 導航

- **上一節**: [7.2 常見新手錯誤](./7.2-common-mistakes.md)
- **下一節**: [7.4 Claude 不是萬能的](./7.4-limitations.md)
- **返回章節目錄**: [第七章目錄](./README.md)
- **返回首頁**: [教材首頁](../../README.md)
