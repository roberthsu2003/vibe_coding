# 6.5 步驟四：自動化部署

## 簡介

自動化是現代開發流程的核心。在本節中，我們將使用 Claude Code CLI 建立完整的 CI/CD 流程，包括自動化測試、建構、部署等。

## 學習目標

- ✅ 設定 GitHub Actions 工作流程
- ✅ 建立自動化測試流程
- ✅ 設定自動部署
- ✅ 建立 Docker 容器
- ✅ 設定監控和日誌

## CI/CD 設定

### 步驟 1：GitHub Actions - 測試流程

```bash
claude "建立 GitHub Actions workflow，包含：
- 多版本 Node.js 測試
- 運行測試套件
- 生成覆蓋率報告
- 上傳到 Codecov" --output .github/workflows/test.yml
```

### 步驟 2：GitHub Actions - 部署流程

```bash
claude "建立部署 workflow，包含：
- 建構應用程式
- 運行測試
- 部署到 Heroku/AWS
- 健康檢查" --output .github/workflows/deploy.yml
```

## Docker 化

### 步驟 3：建立 Dockerfile

```bash
claude "建立生產環境的 Dockerfile，包含：
- 多階段建構
- 最小化映像大小
- 安全性最佳實踐" --output Dockerfile
```

### 步驟 4：Docker Compose

```bash
claude "建立 docker-compose.yml，包含：
- API 服務
- MongoDB 服務
- Nginx（反向代理）
- 網路設定" --output docker-compose.yml
```

## 自動化腳本

### 步驟 5：建立部署腳本

```bash
claude "建立部署腳本，包含：
- 環境檢查
- 資料庫遷移
- 建構和部署
- 回滾機制" --output scripts/deploy.sh
```

### 步驟 6：建立健康檢查

```bash
claude "建立健康檢查端點和腳本" --output src/utils/health.js
```

## 監控設定

### 步驟 7：日誌系統

```bash
# 安裝日誌套件
npm install winston morgan

claude "建立日誌系統，使用 Winston" --output src/utils/logger.js
```

### 步驟 8：錯誤追蹤

```bash
# 安裝 Sentry
npm install @sentry/node

claude "整合 Sentry 錯誤追蹤" --output src/utils/sentry.js
```

## 檢查清單

- [ ] GitHub Actions 已設定
- [ ] Docker 配置已完成
- [ ] 部署腳本已建立
- [ ] 監控系統已設定
- [ ] 自動化測試正常運作

---

⏳ 內容持續補充中

## 導航

- **上一節**: [6.4 建立文檔](./6.4-documentation.md)
- **下一章**: [第七章：給初學者的建議](../chapter7/README.md)
- **返回章節目錄**: [第六章目錄](./README.md)
- **返回首頁**: [教材首頁](../../README.md)
