# 3.3 第一次對話

## 開始與 Claude 對話

現在你已經熟悉了基本命令，讓我們來試試與 Claude 進行真正的對話和互動！

## 對話模式

### 基本對話
```bash
# 簡單問候
claude chat --prompt "你好！"
```

**Claude 的回應**：
```
你好！我是 Claude，很高興透過 CLI 與你互動。我可以幫助你進行程式開發、
程式碼分析、除錯和許多其他編程任務。有什麼我可以協助你的嗎？
```

### 提出問題
```bash
# 詢問技術問題
claude chat --prompt "JavaScript 的 async/await 是什麼？請簡單說明"
```

### 請求解釋程式碼
```bash
# 準備一段程式碼
cat > example.js << 'EOF'
const numbers = [1, 2, 3, 4, 5];
const doubled = numbers.map(x => x * 2);
console.log(doubled);
EOF

# 請 Claude 解釋
claude chat --prompt "請解釋這段程式碼在做什麼：$(cat example.js)"
```

## 實用對話範例

### 範例 1：學習新概念
```bash
claude chat --prompt "什麼是 REST API？請用初學者能理解的方式說明"
```

### 範例 2：尋求建議
```bash
claude chat --prompt "我想學習後端開發，應該選擇 Node.js、Python 還是 Go？"
```

### 範例 3：除錯協助
```bash
claude chat --prompt "我的 JavaScript 程式出現 'undefined is not a function' 錯誤，可能是什麼原因？"
```

### 範例 4：最佳實踐
```bash
claude chat --prompt "撰寫 Git commit 訊息有什麼最佳實踐嗎？"
```

## 生成程式碼的對話

### 從簡單開始

**任務 1：生成基本函數**
```bash
claude generate --prompt "建立一個 JavaScript 函數，計算兩個數字的平均值"
```

**預期輸出**：
```javascript
function calculateAverage(num1, num2) {
    return (num1 + num2) / 2;
}

// 使用範例
console.log(calculateAverage(10, 20)); // 輸出: 15
```

**任務 2：生成類別**
```bash
claude generate --prompt "建立一個 Person 類別，包含 name, age 屬性和 introduce 方法"
```

**任務 3：生成完整檔案**
```bash
claude generate \
  --file calculator.js \
  --prompt "建立一個計算機類別，支援加減乘除四種運算，包含錯誤處理"
```

### 提出更詳細的要求

**好的提示範例**：
```bash
claude generate --prompt "建立一個 Node.js Express 路由處理器：
- 路徑為 /api/users/:id
- HTTP 方法為 GET
- 從資料庫查詢使用者資料
- 如果找不到回傳 404
- 包含錯誤處理
- 使用 async/await"
```

## 分析程式碼的對話

### 基本分析

**建立測試檔案**：
```bash
cat > demo.js << 'EOF'
function getData() {
    var data = [];
    for (var i = 0; i < 10; i++) {
        data.push(i);
    }
    return data;
}
EOF
```

**請 Claude 分析**：
```bash
claude analyze demo.js
```

**Claude 會指出**：
- 建議使用 `const` 或 `let` 替代 `var`
- 可以使用更現代的陣列方法

### 要求改進建議
```bash
claude chat --prompt "請分析這個函數並提供改進建議：
$(cat demo.js)"
```

## 互動式對話技巧

### 1. 漸進式提問

**第一次對話**：
```bash
claude chat --prompt "我想建立一個待辦事項 API"
```

**根據回應，繼續提問**：
```bash
claude chat --prompt "請幫我設計 API 的路由結構"
```

**進一步細化**：
```bash
claude generate --prompt "根據剛才的設計，建立 Express 路由程式碼"
```

### 2. 提供上下文

**不好的提示**（缺少上下文）：
```bash
claude generate --prompt "寫個函數"
```

**好的提示**（提供充分上下文）：
```bash
claude generate --prompt "我正在開發一個電商網站，需要一個函數來計算購物車總金額。
函數需要：
- 接收商品陣列（每個商品有 price 和 quantity）
- 計算總金額
- 支援折扣碼
- 處理無效輸入
請用 JavaScript ES6+ 撰寫"
```

### 3. 要求特定格式

```bash
claude generate --prompt "建立一個 React 元件，要求：
- 使用函數元件
- 使用 TypeScript
- 包含 props 介面定義
- 加上 JSDoc 註解
- 元件名稱為 UserCard
- 顯示使用者名稱和頭像"
```

## 常見使用模式

### 模式 1：學習流程
```bash
# 1. 了解概念
claude chat --prompt "什麼是 RESTful API？"

# 2. 看範例
claude generate --prompt "給我一個簡單的 REST API 範例"

# 3. 實作
claude generate --file api.js --prompt "建立完整的 REST API"

# 4. 學習改進
claude analyze api.js
```

### 模式 2：除錯流程
```bash
# 1. 描述問題
claude chat --prompt "我的程式出現 CORS 錯誤"

# 2. 分析程式碼
claude analyze --file server.js

# 3. 獲得修正建議
claude chat --prompt "如何修正 CORS 問題？請提供程式碼"

# 4. 應用修正
# 根據建議修改程式碼
```

### 模式 3：重構流程
```bash
# 1. 分析現有程式碼
claude analyze legacy-code.js

# 2. 要求重構建議
claude chat --prompt "請提供重構建議：$(cat legacy-code.js)"

# 3. 執行重構
claude refactor legacy-code.js

# 4. 驗證結果
claude analyze legacy-code.js
```

## 有效溝通的要訣

### ✅ 好的提示特徵
1. **具體明確**：說清楚想要什麼
2. **提供上下文**：說明使用場景
3. **指定需求**：列出具體要求
4. **明確限制**：說明不要什麼

### ❌ 避免的提示方式
1. **過於籠統**：「幫我寫程式」
2. **缺少上下文**：「優化這個」
3. **模糊不清**：「做一些改進」
4. **要求過多**：一次要求太多功能

## 練習任務

### 任務 1：對話練習
試著進行這些對話：

```bash
# 1. 自我介紹
claude chat --prompt "你能做什麼？"

# 2. 技術諮詢
claude chat --prompt "初學者應該先學 JavaScript 還是 TypeScript？"

# 3. 程式碼解釋
claude chat --prompt "請解釋 JavaScript 的閉包 (closure)"
```

### 任務 2：生成練習
生成以下程式碼：

```bash
# 1. 簡單函數
claude generate --prompt "建立一個檢查是否為質數的函數"

# 2. 資料處理
claude generate --prompt "建立一個函數，過濾陣列中的偶數"

# 3. 實用工具
claude generate --prompt "建立一個格式化日期的工具函數"
```

### 任務 3：完整流程
完成一個小專案：

```bash
# 1. 討論需求
claude chat --prompt "我想建立一個簡單的 TODO 清單 CLI 工具"

# 2. 設計結構
claude chat --prompt "請幫我設計專案結構"

# 3. 生成程式碼
claude generate --file todo-cli.js --prompt "根據設計建立 TODO CLI 程式"

# 4. 分析品質
claude analyze todo-cli.js
```

## 小技巧

### 1. 使用檔案內容作為上下文
```bash
# 將檔案內容包含在提示中
claude chat --prompt "請檢查這段程式碼的安全性問題：
$(cat user-auth.js)"
```

### 2. 組合多個命令
```bash
# 生成後立即分析
claude generate --file app.js --prompt "建立 Express 伺服器" && \
  claude analyze app.js
```

### 3. 儲存常用提示
```bash
# 建立提示模板檔案
echo "建立一個 Express API 路由，包含：
- RESTful 設計
- 錯誤處理
- 輸入驗證
- 使用 async/await" > prompts/api-route.txt

# 使用模板
claude generate --prompt "$(cat prompts/api-route.txt)"
```

⏳ **本節內容持續補充中**

---

## 導航

- **上一節**: [3.2 基本命令元素](./3.2-basic-commands.md)
- **下一章**: [第四章：核心功能詳解](../chapter4/README.md)
- **返回**: [第三章目錄](./README.md)
