# 3.2 基本命令元素

## Claude CLI 命令結構

Claude Code CLI 的命令遵循標準的命令列格式：

```
claude <command> [options] [arguments]
```

- `claude`: 主程式
- `<command>`: 要執行的動作（必填）
- `[options]`: 選項參數（選填）
- `[arguments]`: 其他參數（選填）

## 查看幫助

### 主要幫助
```bash
# 查看所有可用命令
claude --help
claude -h
```

### 特定命令幫助
```bash
# 查看 generate 命令的說明
claude generate --help

# 查看 analyze 命令的說明
claude analyze --help
```

## 主要命令清單

### 1. 程式碼生成
```bash
claude generate
```
用途：根據描述生成程式碼

### 2. 程式碼分析
```bash
claude analyze
```
用途：分析程式碼品質和問題

### 3. 程式碼重構
```bash
claude refactor
```
用途：改善和重構現有程式碼

### 4. 測試生成
```bash
claude test
```
用途：自動產生測試程式碼

### 5. 文檔生成
```bash
claude docs
```
用途：產生專案文檔

### 6. 對話模式
```bash
claude chat
```
用途：與 Claude 進行對話

### 7. 配置管理
```bash
claude config
```
用途：管理 CLI 設定

## 常用選項 (Options)

### 全域選項

| 選項 | 簡寫 | 說明 | 範例 |
|------|------|------|------|
| `--help` | `-h` | 顯示幫助 | `claude --help` |
| `--version` | `-v` | 顯示版本 | `claude --version` |
| `--verbose` | | 顯示詳細輸出 | `claude --verbose generate` |
| `--quiet` | `-q` | 安靜模式 | `claude -q analyze` |
| `--format` | `-f` | 輸出格式 | `claude -f json analyze` |

### 命令特定選項

#### generate 命令
```bash
# 基本用法
claude generate --prompt "你的描述"

# 儲存到檔案
claude generate --file app.js --prompt "建立 Express 伺服器"

# 指定語言
claude generate --language python --prompt "建立排序函數"

# 使用模板
claude generate --template component --name Button
```

#### analyze 命令
```bash
# 分析單一檔案
claude analyze src/main.js

# 分析整個目錄
claude analyze --recursive src/

# 自動修正
claude analyze --fix src/app.js

# 嚴格模式
claude analyze --strict src/

# 指定輸出格式
claude analyze --format json src/main.js
```

#### refactor 命令
```bash
# 基本重構
claude refactor src/legacy.js

# 指定風格
claude refactor --style modern src/

# 優化效能
claude optimize --file src/utils.js

# 更新語法
claude modernize --target es2022 src/
```

## 參數類型

### 1. 必填參數
某些命令需要提供特定參數：

```bash
# analyze 需要檔案路徑
claude analyze <file-path>

# generate 需要提示
claude generate --prompt "<description>"
```

### 2. 選填參數
可以增強功能但非必要：

```bash
# 輸出格式（預設是文字）
claude analyze --format json src/app.js

# 最大 tokens（預設是配置檔設定）
claude generate --max-tokens 2048 --prompt "..."
```

### 3. 布林參數
開關型參數，不需要值：

```bash
# 啟用功能
claude analyze --fix src/app.js

# 遞迴處理
claude analyze --recursive src/

# 嚴格模式
claude analyze --strict
```

## 參數值的寫法

### 短選項 vs 長選項
```bash
# 長選項（易讀）
claude generate --prompt "建立函數"

# 短選項（快速）
claude generate -p "建立函數"
```

### 參數值的格式

**帶空格的值要用引號**：
```bash
# ✅ 正確
claude generate --prompt "建立一個計算函數"

# ❌ 錯誤（會被當作多個參數）
claude generate --prompt 建立一個計算函數
```

**等號 vs 空格**：
```bash
# 兩種寫法都可以
claude generate --prompt="建立函數"
claude generate --prompt "建立函數"
```

## 組合使用

### 多個選項組合
```bash
# 結合多個選項
claude analyze \
  --recursive \
  --fix \
  --format json \
  --output result.json \
  src/
```

### 使用管線 (Pipe)
```bash
# 將輸出傳給其他命令
claude generate --prompt "建立函數" | tee output.txt

# 過濾輸出
claude analyze src/ | grep "warning"
```

### 重導向輸出
```bash
# 儲存輸出到檔案
claude generate --prompt "建立 API" > api.js

# 附加到檔案
claude analyze src/app.js >> report.txt

# 同時顯示和儲存
claude generate --prompt "建立函數" | tee function.js
```

## 實用範例

### 範例 1：快速生成程式碼
```bash
claude generate \
  --prompt "建立一個驗證 email 的函數，使用正規表達式" \
  --language javascript \
  --output email-validator.js
```

### 範例 2：批次分析
```bash
# 分析所有 JS 檔案並輸出 JSON
find src/ -name "*.js" | \
  xargs claude analyze --format json > analysis.json
```

### 範例 3：自動化工作流程
```bash
# 分析、修正、測試一條龍
claude analyze --fix src/ && \
  claude test --unit src/ && \
  echo "✅ 程式碼品質檢查通過"
```

## 常見錯誤

### ❌ 忘記引號
```bash
# 錯誤
claude generate --prompt 建立一個函數

# 正確
claude generate --prompt "建立一個函數"
```

### ❌ 選項位置錯誤
```bash
# 錯誤（選項要在命令後面）
claude --format json analyze src/app.js

# 正確
claude analyze --format json src/app.js
```

### ❌ 拼寫錯誤
```bash
# 錯誤
claude genrate --prompt "test"

# 正確
claude generate --prompt "test"
```

## 除錯技巧

### 使用 verbose 模式
```bash
# 查看詳細執行過程
claude --verbose generate --prompt "建立函數"
```

### 使用 dry-run（如果支援）
```bash
# 預覽將要執行的動作（不實際執行）
claude generate --dry-run --prompt "建立函數"
```

### 查看配置
```bash
# 檢查目前設定
claude config list

# 檢查特定設定
claude config get api-key
```

## 練習任務

試著執行以下命令，熟悉基本操作：

```bash
# 1. 查看幫助
claude --help
claude generate --help

# 2. 生成簡單程式碼
claude generate --prompt "建立 Hello World"

# 3. 分析檔案（需先建立檔案）
echo "var x = 1;" > test.js
claude analyze test.js

# 4. 查看版本和配置
claude --version
claude config list
```

⏳ **本節內容持續補充中**

---

## 導航

- **上一節**: [3.1 終端機基礎操作](./3.1-terminal-basics.md)
- **下一節**: [3.3 第一次對話](./3.3-first-conversation.md)
- **返回**: [第三章目錄](./README.md)
