# 第一週實作練習：環境建置與基礎操作

## 🎯 練習目標

通過本週的實作練習，學生將能夠：
1. 成功建置 Claude Code CLI 開發環境
2. 掌握基本命令的使用方法
3. 完成第一次 AI 輔助程式碼生成
4. 理解 CLI 工具的基本操作流程

## 📋 練習清單

### 練習 1：環境建置驗證 ⭐

**目標**：確保開發環境正確設定
**時間**：15 分鐘
**難度**：初級

#### 步驟說明

1. **檢查系統環境**
```bash
# 檢查 Node.js 版本
node --version
# 期待輸出：v16.0.0 或更高

# 檢查 npm 版本
npm --version
# 期待輸出：7.0.0 或更高
```

2. **安裝 Claude Code CLI**
```bash
# 全域安裝
npm install -g @anthropic-ai/claude-cli

# 驗證安裝
claude --version
# 期待輸出：Claude CLI v1.0.0
```

3. **設定 API 金鑰**
```bash
# 設定環境變數
export ANTHROPIC_API_KEY="your-api-key-here"

# 或使用配置命令
claude config set api-key your-api-key-here
```

4. **測試連線**
```bash
# 測試 API 連線
claude test-connection
# 期待看到連線成功訊息
```

#### 檢核項目
- [ ] Node.js 版本符合要求
- [ ] Claude CLI 安裝成功
- [ ] API 金鑰設定完成
- [ ] 連線測試通過

#### 常見問題解決
**問題：npm install 權限錯誤**
```bash
# 解決方案
sudo npm install -g @anthropic-ai/claude-cli
# 或設定 npm prefix
mkdir ~/.npm-global
npm config set prefix '~/.npm-global'
export PATH=~/.npm-global/bin:$PATH
```

**問題：連線失敗**
```bash
# 檢查金鑰格式
echo $ANTHROPIC_API_KEY
# 確保以 sk-ant-api03- 開頭
```

---

### 練習 2：第一次程式碼生成 ⭐⭐

**目標**：體驗 AI 輔助程式碼生成功能
**時間**：20 分鐘
**難度**：初級

#### 任務 A：基礎函數生成

**需求**：生成一個溫度轉換器

```bash
# 生成攝氏轉華氏函數
claude generate --prompt "建立一個 JavaScript 函數，將攝氏溫度轉換為華氏溫度，包含參數驗證和使用範例"
```

**期待輸出範例**：
```javascript
function celsiusToFahrenheit(celsius) {
    // 參數驗證
    if (typeof celsius !== 'number' || isNaN(celsius)) {
        throw new Error('輸入必須是數字');
    }
    
    // 轉換公式: F = C * 9/5 + 32
    const fahrenheit = (celsius * 9/5) + 32;
    return fahrenheit;
}

// 使用範例
console.log(celsiusToFahrenheit(0));   // 32
console.log(celsiusToFahrenheit(100)); // 212
console.log(celsiusToFahrenheit(25));  // 77
```

#### 任務 B：類別設計

**需求**：建立一個學生管理類別

```bash
# 生成學生類別
claude generate \
  --prompt "建立一個 Python 類別 Student，包含姓名、年齡、成績列表屬性，以及計算平均成績和判斷是否及格的方法" \
  --file student.py
```

**期待功能**：
- 初始化學生資訊
- 新增成績
- 計算平均成績
- 判斷是否及格（60分以上）

#### 任務 C：資料處理函數

**需求**：建立陣列操作工具

```bash
# 生成陣列處理函數
claude generate --prompt "建立 JavaScript 函數集合，包含陣列去重、排序、過濾偶數、計算總和等常用操作，每個函數都要有詳細註解"
```

#### 驗證步驟
1. 執行生成的程式碼
2. 測試各種輸入情況
3. 確認錯誤處理機制
4. 檢查程式碼可讀性

---

### 練習 3：程式碼分析體驗 ⭐⭐

**目標**：了解 AI 程式碼分析能力
**時間**：15 分鐘
**難度**：初級

#### 準備測試檔案

建立包含問題的程式碼檔案：

```bash
# 建立測試檔案
cat > bad_code.js << 'EOF'
var userName = "john";
var userAge = 25;
var userEmail = "john@email";

function validateUser(user) {
  if (user.name == "") {
    return false;
  }
  if (user.age < 0) {
    return false;
  }
  if (user.email.indexOf("@") == -1) {
    return false;
  }
  return true;
}

var user = {
  name: userName,
  age: userAge,
  email: userEmail
};

console.log(validateUser(user));
EOF
```

#### 分析任務

```bash
# 分析程式碼品質
claude analyze bad_code.js

# 分析安全性
claude analyze --security bad_code.js

# 分析效能
claude analyze --performance bad_code.js
```

#### 期待分析結果
1. **程式碼品質問題**：
   - 建議使用 `const`/`let` 替代 `var`
   - 使用 `===` 替代 `==`
   - Email 驗證過於簡單

2. **改進建議**：
   - 加強輸入驗證
   - 使用正規表達式驗證 email
   - 改善錯誤處理

#### 改進任務

根據分析結果改善程式碼：

```bash
# 請 Claude 重構程式碼
claude refactor bad_code.js --style modern
```

---

### 練習 4：配置檔案客製化 ⭐⭐⭐

**目標**：建立個人化的開發環境配置
**時間**：25 分鐘
**難度**：中級

#### 步驟 1：建立專案目錄

```bash
# 建立練習專案
mkdir my-claude-workspace
cd my-claude-workspace

# 初始化 Claude 配置
claude init
```

#### 步驟 2：客製化配置

編輯 `.claude/config.json`：

```json
{
  "model": "claude-3-sonnet-20240229",
  "max_tokens": 4096,
  "temperature": 0.3,
  "system_prompt": "你是一位專業的程式設計導師，請用繁體中文回應，並提供詳細的解釋和範例",
  "include_patterns": [
    "src/**/*.{js,ts,jsx,tsx}",
    "test/**/*.{js,ts}",
    "docs/**/*.md",
    "*.{json,yaml,yml}"
  ],
  "exclude_patterns": [
    "node_modules/**",
    "dist/**",
    "build/**",
    "*.log",
    ".git/**",
    "coverage/**"
  ],
  "custom_commands": {
    "comp": "generate --template react-component",
    "test": "test --unit --framework jest",
    "doc": "docs --format markdown"
  },
  "quality_settings": {
    "min_test_coverage": 80,
    "max_complexity": 10,
    "enable_security_check": true
  }
}
```

#### 步驟 3：建立自訂模板

```bash
# 建立模板目錄
mkdir -p .claude/templates

# 建立函數模板
cat > .claude/templates/function.md << 'EOF'
# JavaScript 函數模板

請建立一個 JavaScript 函數，包含以下特性：

## 基本需求
- 函數名稱：{{name}}
- 功能描述：{{description}}
- 參數：{{parameters}}
- 回傳值：{{return_type}}

## 程式碼品質
- 包含 JSDoc 註解
- 參數驗證
- 錯誤處理
- 使用範例

## 風格要求
- 使用 ES6+ 語法
- 遵循 Airbnb 風格指南
- 變數命名使用 camelCase
EOF
```

#### 步驟 4：測試自訂配置

```bash
# 使用自訂模板
claude generate \
  --template function \
  --name calculateBMI \
  --description "計算身體質量指數" \
  --parameters "weight (number), height (number)" \
  --return_type "number"
```

#### 驗證項目
- [ ] 配置檔案格式正確
- [ ] 自訂提示詞生效
- [ ] 檔案過濾規則有效
- [ ] 自訂模板可用

---

### 練習 5：綜合應用挑戰 ⭐⭐⭐⭐

**目標**：整合所學技能完成小專案
**時間**：30 分鐘
**難度**：中高級

#### 專案需求：簡易待辦事項管理器

**功能要求**：
1. 新增待辦事項
2. 標記完成/未完成
3. 刪除待辦事項
4. 列出所有事項
5. 資料持久化（JSON 檔案）

#### 實作步驟

**步驟 1：生成主要類別**
```bash
claude generate \
  --prompt "建立一個 TodoManager 類別，使用 JavaScript ES6 語法，包含新增、刪除、標記完成、列出待辦事項的方法，資料要能儲存到 JSON 檔案" \
  --file todo-manager.js
```

**步驟 2：生成 CLI 介面**
```bash
claude generate \
  --prompt "建立一個 Node.js 命令列介面，使用 TodoManager 類別，支援 add、list、complete、delete 等命令，使用 process.argv 處理參數" \
  --file todo-cli.js
```

**步驟 3：生成測試檔案**
```bash
claude test --unit todo-manager.js \
  --framework jest \
  --output todo-manager.test.js
```

**步驟 4：分析程式碼品質**
```bash
claude analyze --quality ./ \
  --include "*.js" \
  --output quality-report.json
```

**步驟 5：生成文檔**
```bash
claude docs --readme \
  --include-usage \
  --include-api \
  --output README.md
```

#### 測試驗證

```bash
# 測試基本功能
node todo-cli.js add "學習 Claude Code CLI"
node todo-cli.js add "完成作業"
node todo-cli.js list
node todo-cli.js complete 0
node todo-cli.js list
```

#### 評分標準
- **功能完整性** (40%)：所有功能正常運作
- **程式碼品質** (30%)：結構清晰、遵循最佳實踐
- **錯誤處理** (20%)：適當的錯誤處理和使用者提示
- **文檔品質** (10%)：README 清晰易懂

---

## 📝 作業提交格式

### 提交內容清單

1. **環境驗證截圖**
   - `claude --version` 執行結果
   - `claude test-connection` 執行結果

2. **程式碼檔案**
   - 所有練習生成的程式碼檔案
   - 配置檔案 `.claude/config.json`

3. **執行結果**
   - 各項練習的執行截圖
   - 程式碼分析報告

4. **學習報告**
   - 練習過程中遇到的問題和解決方法
   - 對 AI 輔助編程的初步感受
   - 學習心得和改進建議

### 檔案結構

```
第一週作業/
├── screenshots/           # 截圖檔案
│   ├── installation.png
│   ├── test-connection.png
│   └── code-execution.png
├── code/                 # 程式碼檔案
│   ├── temperature.js
│   ├── student.py
│   ├── array-utils.js
│   ├── todo-manager.js
│   └── todo-cli.js
├── config/               # 配置檔案
│   └── config.json
├── reports/              # 分析報告
│   └── quality-report.json
└── 學習報告.md           # 學習心得
```

### 提交方式

1. **壓縮檔案提交**
   - 檔案命名：`學號_姓名_第一週作業.zip`
   - 上傳到指定的學習管理系統

2. **Git 儲存庫提交** (進階選項)
   - 建立個人學習儲存庫
   - 提交所有作業檔案
   - 分享儲存庫連結

### 評分標準

| 評分項目 | 配分 | 評分標準 |
|----------|------|----------|
| 環境建置 | 20% | 成功安裝並設定 CLI 環境 |
| 基礎操作 | 25% | 完成所有基礎練習並執行正確 |
| 程式碼品質 | 25% | 生成的程式碼結構良好、可執行 |
| 綜合應用 | 20% | 專案完整性和功能正確性 |
| 學習態度 | 10% | 學習報告品質和問題反思 |

---

## 🆘 幫助與支援

### 常見問題快速解決

**Q: 安裝後找不到 claude 命令？**
```bash
# 檢查全域安裝路徑
npm list -g --depth=0 | grep claude

# 檢查 PATH 設定
echo $PATH

# 重新載入環境變數
source ~/.bashrc  # Linux/macOS
# 或重新開啟終端機
```

**Q: API 金鑰一直顯示無效？**
```bash
# 檢查金鑰格式
echo $ANTHROPIC_API_KEY | head -c 20

# 重新設定金鑰
unset ANTHROPIC_API_KEY
export ANTHROPIC_API_KEY="sk-ant-api03-your-key-here"

# 確認設定生效
claude config get api-key
```

**Q: 生成的程式碼無法執行？**
- 檢查語法錯誤
- 確認相依套件已安裝
- 檢查檔案路徑和權限
- 使用更具體的提示重新生成

### 學習資源

1. **官方文檔**：
   - [Claude API 文檔](https://docs.anthropic.com/claude)
   - [Node.js 官方指南](https://nodejs.org/docs)

2. **社群支援**：
   - 課程討論區
   - 學習群組
   - 助教辦公時間

3. **額外練習**：
   - [JavaScript 練習題庫](https://javascript.info/)
   - [Python 基礎教學](https://docs.python.org/3/tutorial/)

---

**完成所有練習後，你將具備使用 Claude Code CLI 進行基礎程式開發的能力！下週我們將深入學習更進階的功能和技巧。** 🚀