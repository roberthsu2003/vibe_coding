# 計畫文件 (Plan Document)

> **使用說明**: 這是一份架構設計模板，用於規劃專案的整體架構、模組劃分與實作順序。這份文件是「給 AI 的導航地圖」，讓 AI 在後續實作時不會迷路。

---

## 專案概覽

### 專案名稱
[專案名稱]

### 專案目標
[用 2-3 句話說明這個專案要達成什麼目標]

### 核心價值
[這個專案解決了什麼問題？為使用者帶來什麼價值？]

---

## 系統架構

### 整體架構圖

```
[請用文字或 ASCII 圖描述系統架構]

範例:
┌─────────────┐
│   前端 UI    │ (React)
└──────┬──────┘
       │ HTTP/REST
┌──────▼──────┐
│  後端 API    │ (Node.js/Express)
└──────┬──────┘
       │
┌──────▼──────┐
│   資料庫     │ (MongoDB)
└─────────────┘
```

### 技術堆疊

| 層級   | 技術選擇              | 理由                |
| ---- | ----------------- | ----------------- |
| 前端   | [例如：React + Vite] | [為什麼選擇這個技術？]      |
| 後端   | [例如：Node.js]      | [原因]              |
| 資料庫  | [例如：MongoDB]      | [原因]              |
| 部署   | [例如：Vercel]       | [原因]              |
| 其他工具 | [例如：Jest 測試框架]   | [原因]              |

---

## 模組劃分

### 模組 1: [模組名稱，例如：使用者認證]

**功能職責**:
- [這個模組負責什麼？]
- [包含哪些功能？]

**主要元件/檔案**:
- `auth.js` - [說明]
- `login.jsx` - [說明]
- `register.jsx` - [說明]

**對外介面**:
- `login(username, password)` → 返回 token
- `register(userData)` → 返回使用者資訊
- `logout()` → 清除認證狀態

**相依模組**:
- 依賴 [模組 X]
- 被 [模組 Y] 使用

---

### 模組 2: [模組名稱]

**功能職責**:
- [職責 1]
- [職責 2]

**主要元件/檔案**:
- [檔案 1] - [說明]
- [檔案 2] - [說明]

**對外介面**:
- [API 1]
- [API 2]

**相依模組**:
- [列出相依關係]

---

### 模組 3: [可選，複製上方模板]

---

## 資料流設計

### 資料流 1: [例如：使用者登入流程]

```
1. 使用者輸入帳號密碼
   ↓
2. 前端驗證格式
   ↓
3. 發送 POST /api/auth/login
   ↓
4. 後端驗證帳密
   ↓
5. 生成 JWT token
   ↓
6. 返回 token 給前端
   ↓
7. 前端儲存 token (localStorage)
   ↓
8. 導向到主頁面
```

### 資料流 2: [名稱]

```
[描述資料如何在系統中流動]
```

---

## API 設計

### 認證相關 API

#### POST /api/auth/login
**用途**: 使用者登入

**請求格式**:
```json
{
  "username": "user123",
  "password": "password123"
}
```

**成功回應** (200):
```json
{
  "success": true,
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 1,
    "username": "user123",
    "email": "user@example.com"
  }
}
```

**失敗回應** (401):
```json
{
  "success": false,
  "error": "Invalid username or password"
}
```

---

#### POST /api/auth/register
**用途**: 註冊新使用者

**請求格式**:
```json
{
  "username": "newuser",
  "email": "new@example.com",
  "password": "securePassword123"
}
```

**成功回應** (201):
```json
{
  "success": true,
  "message": "User registered successfully",
  "userId": 123
}
```

---

### [其他 API 群組]

#### GET /api/[resource]
[詳細說明]

#### POST /api/[resource]
[詳細說明]

---

## 資料庫設計

### 資料表 1: users

| 欄位名稱          | 型別              | 約束條件              | 說明      |
| ------------- | --------------- | ----------------- | ------- |
| id            | INT             | PRIMARY KEY, AUTO | 唯一識別碼   |
| username      | VARCHAR(50)     | UNIQUE, NOT NULL  | 使用者名稱   |
| email         | VARCHAR(100)    | UNIQUE, NOT NULL  | 電子郵件    |
| password_hash | VARCHAR(255)    | NOT NULL          | 加密後的密碼  |
| created_at    | TIMESTAMP       | DEFAULT NOW()     | 建立時間    |
| updated_at    | TIMESTAMP       | DEFAULT NOW()     | 更新時間    |

**索引**:
- INDEX on `username`
- INDEX on `email`

---

### 資料表 2: [表名]

| 欄位名稱 | 型別 | 約束條件 | 說明 |
| ---- | -- | ---- | -- |
|      |    |      |    |

---

## 檔案結構

```
project-root/
├── frontend/
│   ├── src/
│   │   ├── components/       # UI 元件
│   │   │   ├── Auth/
│   │   │   │   ├── Login.jsx
│   │   │   │   └── Register.jsx
│   │   │   └── Common/
│   │   ├── pages/            # 頁面元件
│   │   ├── services/         # API 呼叫
│   │   ├── utils/            # 工具函式
│   │   └── App.jsx
│   ├── public/
│   └── package.json
├── backend/
│   ├── src/
│   │   ├── routes/           # 路由定義
│   │   ├── controllers/      # 控制器
│   │   ├── models/           # 資料模型
│   │   ├── middleware/       # 中介軟體
│   │   └── utils/            # 工具函式
│   └── package.json
├── tests/                    # 測試檔案
└── README.md
```

---

## 實作順序與里程碑

### Phase 1: 基礎架構 (第 1-2 天)
**目標**: 建立專案骨架，確保開發環境可運作

- [ ] 建立前端專案 (Vite + React)
- [ ] 建立後端專案 (Node.js + Express)
- [ ] 設定資料庫連線
- [ ] 設定基本路由
- [ ] 確認前後端可以溝通

**驗收標準**: 前端可以成功呼叫後端的 `/api/health` 端點

---

### Phase 2: 核心功能 (第 3-5 天)
**目標**: 實作最重要的功能模組

- [ ] 實作使用者註冊功能
- [ ] 實作使用者登入功能
- [ ] 實作 JWT 認證機制
- [ ] [核心功能 2]
- [ ] [核心功能 3]

**驗收標準**: 使用者可以註冊、登入並存取受保護的頁面

---

### Phase 3: 次要功能 (第 6-7 天)
**目標**: 完善使用者體驗

- [ ] [功能 1]
- [ ] [功能 2]
- [ ] [功能 3]

**驗收標準**: [定義完成標準]

---

### Phase 4: 測試與優化 (第 8-9 天)
**目標**: 確保品質與效能

- [ ] 撰寫單元測試
- [ ] 撰寫整合測試
- [ ] 效能優化
- [ ] 安全性檢查
- [ ] Bug 修復

**驗收標準**: 測試覆蓋率 > 80%，無已知嚴重 Bug

---

### Phase 5: 部署與上線 (第 10 天)
**目標**: 將專案部署到生產環境

- [ ] 設定生產環境變數
- [ ] 部署後端
- [ ] 部署前端
- [ ] 設定網域與 SSL
- [ ] 監控設定

**驗收標準**: 專案可從公開網址存取,運作正常

---

## 風險與挑戰

| 風險項目           | 影響程度 | 緩解措施                |
| -------------- | ---- | ------------------- |
| [例如：第三方 API 不穩定] | 高    | [使用快取機制，設定 fallback] |
| [風險 2]         | 中    | [緩解方式]              |
| [風險 3]         | 低    | [緩解方式]              |

---

## 待決定事項 (To Be Decided)

- [ ] [問題 1]: [需要決定的事項，例如：要用 SQL 還是 NoSQL？]
  - 選項 A: [優缺點]
  - 選項 B: [優缺點]
  - **決策日期**: [預計何時決定]

- [ ] [問題 2]: [待決定事項]

---

## 參考資料

- [技術文件連結]
- [設計稿連結]
- [競品分析連結]
- [相關教學資源]

---

## 如何使用這份計畫文件？

### 給 AI 的使用方式

當你開始實作時，可以這樣提供給 AI:

```
以下是我的專案計畫文件 (plan.md)，請根據這份文件:

1. 幫我生成詳細的 task.md (任務清單)
2. 在實作過程中，確保遵循這份文件定義的架構
3. 如果發現計畫不合理，請提出建議

[貼上 plan.md 內容]
```

### 動態更新

這份計畫文件不是一成不變的，在開發過程中如果發現:
- 架構需要調整
- 技術選擇不適合
- 發現新的風險

請**即時更新這份文件**，讓它永遠反映專案的最新狀態。

---

**提示**:
- 計畫文件應該「粗略但完整」，不要過度細節化
- 重點是「模組劃分」和「實作順序」，讓 AI 知道「大方向」
- 具體的程式碼細節應該在 task.md 或實作時再決定
