# Code Review Prompts

> AI 輔助 Code Review 的 Prompt 範本集

---

## 基本 Code Review

### Prompt 1: 全面檢查

```
請幫我審查以下程式碼,檢查:

1. **程式碼品質**
   - 是否遵循最佳實踐?
   - 命名是否清楚易懂?
   - 是否有重複的程式碼(DRY原則)?

2. **潛在問題**
   - 是否有潛在的 bug?
   - 是否有效能問題?
   - 是否有記憶體洩漏風險?

3. **安全性**
   - 是否有安全漏洞?
   - 輸入驗證是否足夠?
   - 敏感資料處理是否正確?

4. **可維護性**
   - 程式碼是否容易理解?
   - 是否容易修改和擴展?
   - 註解是否適當?

請針對每個問題提供:
- 具體的問題位置
- 問題說明
- 改進建議
- 修正後的程式碼範例

[貼上程式碼]
```

---

## 特定面向的 Code Review

### Prompt 2: 安全性檢查

```
請專注於安全性,審查以下程式碼:

檢查項目:
1. SQL Injection 風險
2. XSS (Cross-Site Scripting) 風險
3. CSRF (Cross-Site Request Forgery) 風險
4. 認證與授權機制是否正確
5. 敏感資料(密碼、API key)是否外洩
6. 檔案上傳是否安全
7. 輸入驗證是否完整

對於每個發現的問題,請提供:
- 風險等級 (高/中/低)
- 攻擊情境範例
- 修復方案

[貼上程式碼]
```

---

### Prompt 3: 效能檢查

```
請從效能角度審查以下程式碼:

檢查項目:
1. 時間複雜度 (Big O)
2. 空間複雜度
3. 是否有不必要的迴圈或重複計算
4. 資料庫查詢是否最佳化 (N+1 問題)
5. 是否有可以快取的部分
6. 是否有阻塞操作 (blocking operations)

請提供:
- 目前的複雜度分析
- 效能瓶頸
- 優化建議
- 優化後的程式碼範例

[貼上程式碼]
```

---

### Prompt 4: 可讀性檢查

```
請從可讀性和可維護性角度審查以下程式碼:

檢查項目:
1. 變數和函式命名是否語義化
2. 函式是否太長(超過 50 行)?
3. 是否違反單一職責原則 (Single Responsibility Principle)?
4. 邏輯是否過於複雜(可以簡化)?
5. 是否需要加註解?
6. 是否遵循專案的程式碼風格?

建議:
- 如何重構可以提升可讀性
- 如何拆分大函式
- 如何改善命名

[貼上程式碼]
```

---

## 特定語言/框架的 Code Review

### Prompt 5: React Component Review

```
請審查這個 React 元件:

檢查項目:
1. **React 最佳實踐**
   - 是否正確使用 hooks?
   - useEffect 依賴陣列是否正確?
   - 是否有不必要的重新渲染?

2. **效能優化**
   - 是否需要 useMemo 或 useCallback?
   - 列表是否有正確的 key?
   - 是否有效能瓶頸?

3. **狀態管理**
   - 狀態提升是否合理?
   - 是否過度使用 context?

4. **可訪問性 (A11y)**
   - 是否有適當的 ARIA 屬性?
   - 鍵盤導航是否正常?

[貼上 React 元件程式碼]
```

---

### Prompt 6: Node.js/Express API Review

```
請審查這個 Express API 端點:

檢查項目:
1. **RESTful 設計**
   - HTTP 方法使用是否正確?
   - 狀態碼是否適當?
   - API 路徑設計是否合理?

2. **錯誤處理**
   - 是否有適當的 try-catch?
   - 錯誤訊息是否友善且不洩漏敏感資訊?
   - 是否有集中的錯誤處理中介軟體?

3. **驗證與授權**
   - 輸入驗證是否完整?
   - 認證機制是否正確?
   - 授權檢查是否足夠?

4. **資料庫操作**
   - 是否有 SQL Injection 風險?
   - 是否有 N+1 查詢問題?
   - 是否正確處理交易?

[貼上 API 程式碼]
```

---

### Prompt 7: Python 程式碼 Review

```
請審查這段 Python 程式碼:

檢查項目:
1. **Python 慣例**
   - 是否遵循 PEP 8 風格指南?
   - 是否使用 Pythonic 寫法?
   - 型別提示 (Type Hints) 是否適當?

2. **常見陷阱**
   - 是否有可變預設參數 (mutable default arguments)?
   - 是否正確處理例外?
   - 是否有資源未正確釋放 (檔案、連線)?

3. **效能**
   - 是否可以使用生成器 (generator)?
   - 是否有不必要的複製?
   - 列表推導式使用是否適當?

[貼上 Python 程式碼]
```

---

## 比較式 Code Review

### Prompt 8: 比較兩種實作方式

```
我有兩種實作相同功能的方式,請幫我比較優劣:

**方式 A**:
[貼上程式碼 A]

**方式 B**:
[貼上程式碼 B]

請從以下角度比較:
1. 可讀性
2. 效能
3. 可維護性
4. 可擴展性
5. 安全性

並建議:
- 哪一種方式更好?
- 為什麼?
- 是否有第三種更好的方式?
```

---

## 重構建議

### Prompt 9: 重構建議

```
以下程式碼運作正常,但我覺得可以寫得更好。
請建議如何重構:

重構方向:
1. 提升可讀性
2. 減少重複程式碼
3. 改善命名
4. 拆分過長的函式
5. 套用設計模式 (如果適合)

請提供:
- 具體的重構步驟
- 重構前後的對比
- 重構的好處

[貼上程式碼]
```

---

### Prompt 10: 函式拆分建議

```
這個函式太長了,請幫我拆分成多個小函式:

要求:
1. 每個函式職責單一
2. 函式名稱清楚表達用途
3. 減少函式的複雜度
4. 保持原有功能不變

[貼上長函式]

請提供:
- 拆分後的程式碼
- 每個新函式的用途說明
- 為什麼這樣拆分
```

---

## 測試相關 Review

### Prompt 11: 檢查是否需要測試

```
請審查以下程式碼,並建議:

1. 哪些部分需要單元測試?
2. 哪些部分需要整合測試?
3. 有哪些 edge cases 需要測試?
4. 建議的測試案例

請提供:
- 測試案例清單
- 測試程式碼範例 (使用 [Jest/Pytest/JUnit])

[貼上程式碼]
```

---

## 程式碼解釋

### Prompt 12: 解釋程式碼

```
請解釋這段程式碼在做什麼:

要求:
1. 逐行說明 (如果程式碼複雜)
2. 說明整體邏輯流程
3. 指出關鍵部分
4. 如果有不明確的地方,提出疑問

[貼上程式碼]
```

---

## Pull Request Review

### Prompt 13: PR 整體檢視

```
這是一個 Pull Request 的變更,請幫我審查:

**PR 說明**: [PR 的目的]

**變更的檔案**:
1. [檔案 1]: [變更內容]
2. [檔案 2]: [變更內容]

請檢查:
1. 變更是否符合 PR 描述的目的?
2. 是否有遺漏的檔案需要修改?
3. 是否有不相關的變更混入?
4. 是否需要更新文件?
5. 是否需要更新或新增測試?
6. 是否會影響現有功能?

請提供:
- 審查意見
- 需要改進的地方
- 是否建議合併

[貼上變更內容或 diff]
```

---

## 使用技巧

### 如何有效使用這些 Prompts?

1. **選擇適當的 Prompt**
   - 根據你的需求選擇對應的 prompt
   - 可以組合多個 prompt

2. **提供足夠的 Context**
   - 除了程式碼,也提供相關的需求說明
   - 說明程式碼的用途和背景

3. **迭代改進**
   - 根據 AI 的建議修改程式碼
   - 再次請 AI 審查修改後的版本

4. **保持批判性思考**
   - AI 的建議不一定都正確
   - 需要自己判斷是否適合你的專案

---

## 客製化 Prompt 範本

根據你的專案需求,可以客製化自己的 review checklist:

```
請審查以下 [專案類型] 的程式碼:

專案特定規範:
- [規範 1: 例如 必須使用 TypeScript]
- [規範 2: 例如 函式長度不超過 30 行]
- [規範 3: 例如 必須有完整的 JSDoc 註解]

檢查項目:
1. [檢查項目 1]
2. [檢查項目 2]
3. [檢查項目 3]

[貼上程式碼]
```

---

**提示**:
- Code Review 不是挑錯,是互相學習和改進的過程
- 使用 AI 輔助可以節省時間,但不能完全取代人工審查
- 將 AI 的建議視為「第二意見」,最終決策仍由你做出
